<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Csf-allow-domains by enigmamarketing</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Csf-allow-domains</h1>
      <h2 class="project-tagline">Resolves domain names and adds them to csf.allow</h2>
      <a href="https://github.com/enigmamarketing/csf-allow-domains" class="btn">View on GitHub</a>
      <a href="https://github.com/enigmamarketing/csf-allow-domains/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/enigmamarketing/csf-allow-domains/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="csf-allow-domains" class="anchor" href="#csf-allow-domains" aria-hidden="true"><span class="octicon octicon-link"></span></a>CSF ALLOW DOMAINS</h1>

<p>If you're using <a href="http://configserver.com/cp/csf.html">CSF firewall</a> and your app relies heavily on an external service like Twitter or Facebook, chances are that your firewall will block those any time soon and you will have to white list them in /etc/csf/csf.allow. </p>

<p>This happened to us while doing a stress test that left us with no database access. If it would have happened on production, caused by user traffic, it would be a serious issue.</p>

<p>But firewalls enjoy working with IPs not domain names... Here comes this module. With it you can list domain names that will get resolved and added to the CSF settings file. It does not delete any domains from the file so some spring clean may be needed from time to time. Some domains may return different sets of A records throughout time, even if they are all valid servers at any given moment, eg. github.</p>

<h1>
<a id="install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h1>

<p>This module was only (barely) tested in Ubuntu 14.04</p>

<h2>
<a id="debian-package" class="anchor" href="#debian-package" aria-hidden="true"><span class="octicon octicon-link"></span></a>Debian Package</h2>

<ul>
<li>download <a href="csf-allow-domains.deb">csf-allow-domains.deb</a>
</li>
<li>dpkg -i ./csf-allow-domains.deb</li>
</ul>

<h2>
<a id="manual-install" class="anchor" href="#manual-install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Manual Install</h2>

<p>All the relevant code can be found in <a href="/usr/local/csf/bin/csf-allow-domains">./usr/local/csf/bin/csf-allow-domains</a>
Just copy those files to your system, update the config.py and use whatever strategy you want to keep the python script going.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/enigmamarketing/csf-allow-domains">Csf-allow-domains</a> is maintained by <a href="https://github.com/enigmamarketing">enigmamarketing</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

